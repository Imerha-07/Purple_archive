---
title: "Google Data Analytics Capstone Project -Bellabeat"
author: "Sarah Oluwatobi Nkereuwem"
date: "2023-07-26"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

![Alt Text](https://miro.medium.com/v2/resize:fit:828/format:webp/1*5aFLN-ffWKNHLeb56Ieufw.jpeg)

## **INTRODUCTION**
This is one of the Google professional data analytics capstone project that focuses on high-tech health products manufactured by Bellabeat for women.  
This helps women to track their overall health and wellness and also get a better understanding of how their body works.  
Bellabeat has 5 focus products: Belabeat app, leaf, time, spring and membership.
This is a small company with the potential to become a major player in the global smart device market space if they make informed decisions to guide there marketing strategy  
<br>
My team has been asked to analyze smart device data from Fitbit users in other to gain insight on how users maximize their smart devices. This insight will help guide the marketing strategy that would be deployed by the company to improve business process.  
I will be following the steps of the data analysis process: Ask(problem to be solved), Prepare(ROCCC), Process(Tools, clean, transform), Analyze(issues, calcs, trends, relationships), Share(visualization&presentation), Act(conclusion, application, next steps)


### **Phase 1: Ask-Identify the business task**
![Alt Text](https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRf68O7iOj9VZqx5sWpxZAOqcYy5fN_czREMQ&usqp=CAU)

Analyze data from Fitbit users smart devices to gain insight and recommendations. 
Select one Bellabeat product to apply insights for potential growth opportunities. 
Primary stakeholders:Urška Sršen and Sando Mur
Secondary stakeholders:Bellabeat analytics team

### **Phase 2: Prepare**
![Alt Text](https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQ4C7ET09-lOnFMaxI-tBaOASjRhgh9Alo0tg&usqp=CAU)

Data was sourced from public dataset that explores smart device users' daily activities:FitBit Fitness Tracker Data (CC0: Public Domain, dataset made available through Mobius)/ <https://www.kaggle.com/arashnic/fitbit>
The data set has 18 CSV files.
Dataset was sourced from consenting 30 FitBit users and generated from a distributed survey via Amazon Mechanical Turk, down to minute-level output for physical activity, heart rate and sleep monitoring. 

**Notes about the data**
I would be making use of the most relevant data-"Daily_activities", "Weight", and "Sleep_daily". This would give useful insight for marketing team.

**Dataset limitations (ROCCC)**

* Reliability: Dataset is from only 30 Fitbit users which is not a representation of 30+ million users. An appropriate size that would be able to provide a high confidence level of over %95 and low margin of error of about %5 would be preferable.
Also, the time range of over 2 months which the data was obtained was not long enough to deduce accuracy and reliability.
* Originality: Dataset was generated by respondents to distributed survey through Amazon Mechanical Turk and not directly obtained by FitBit, so not original
* Comprehensive: The dataset set lack other vital information like sex, age and height, that would have been useful for carrying out more in-depth analysis and obtaining more meaningful insight.
As earlier stated, limited participants and short time range is also a limitation
* Current: Dataset was sourced 7 years ago therefore not current and might not give meaningful insight that would be relevant to Bellabeat and be representative of current trends, therefore, obsolete
* Cited:Dataset was sited, therefore credible

**Issues with dataset**

* 33 unique user id's from daily activity dataset, 24 from sleep and 8 from weight
* Some of the data was recorded for only 2 days in the month
* Deleted "Fat" column because only 2 entries were made and remaining cells were blank

###### **Its noteworthy to state that all insights/conclusions deduced from this analysis should be taken with a pinch of salt as data integrity is not 100%**

**Setting up environment**
**Notes** setting up R environment by installing and loading the necessary packages(install packages in console environment first to avoid error message)
```{r Load packages}
library(dplyr)
library(tidyr)
library(lubridate)
library(readr)
library(tidyverse)
library(ggplot2)
library(here)
library(skimr)
library(janitor)
library(png)
library(jpeg)
library(magick)
```
###### **Library() conflicts can occur when functions in 2 different packages have the same name. In such cases, function from the most recently loaded package would be used by Rstudio**

### Import relevant dataset already renamed using excel
```{r Import dataset}
library(readr)
compiled_daily_activity <- read.csv("Daily_activities_merged_New.csv")
weight_log <- read.csv("Weight_log_infoNew.csv")
sleep_daily <- read.csv("Sleep_day_New.csv")
```

### **Phase 3: Process**
![Alt Text](https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQCgRH_ex1CfZPZ0Tv43DDG6qKL_aWl1JeMDA&usqp=CAU)

Verify data and check for possible errors
Using n_distinct(), daily_activity has 33 users, 24 from sleep and just 8 from weight
```{r head1-cda}
head(compiled_daily_activity)


```
```{r head2-wl}
head(weight_log)

```
####### **'Fat' row already deleted in excel due to blank cells so not relevant**
```{r head3-sd}
head(sleep_daily)

```
```{r Tibble1-cda}
library(tibble)
tibble(compiled_daily_activity)

```
Although we have only about one month data worth, I still have to remove those that did not record their daily total steps as this would cause inconsistency in the data analysis. Some also recorded low number of steps and low caloric burn but this could be due to various reasons, therefore we would not be deleting those.
```{r remove 0 steps}
daily_activity_new <- compiled_daily_activity %>%
  filter(TotalSteps !=0)

View(daily_activity_new)

```

```{r Tibble2-wl}
tibble(weight_log)

```
I separated the date column for both weight_log and sleep_day into 2 for readability purposes
```{r separate date into day and time1}
weight_log_new <- weight_log %>%
  separate(Date, c("Date", "Time"), " ")

View(weight_log_new)

```

```{r Tibble3-sd}
tibble(sleep_daily)

```
```{r separate date into day and time column2}
sleep_daily_new <- sleep_daily %>%
  separate(SleepDay, c("Date", "Time"), " ")

View(sleep_daily_new)

```

```{r Col1-cda}
colnames(daily_activity_new)

```
```{r col2-wl}
colnames(weight_log_new)

```
```{r col3-sd}
colnames(sleep_daily_new)

```
Reviewing this data shows that out of 33 contrary to 30 from case citation, only 8 unique ids' imputed their weight, 24 recorded sleep data, showing incomplete and inconsistent data set. 
I'll check for and remove duplicate rows to make data cleaner.
```{r initially 940 before removing 0 steps}
nrow(unique(daily_activity_new))

```
```{r Tibble showed 67}
nrow(unique(weight_log_new))
```
```{r Tibble showed 413}
nrow(unique(sleep_daily_new))
```
I'll create new sleep table with unique values
```{r new sleep table}
sleep_daily_v2 <- unique(sleep_daily_new)


```

### **Phase 4: Analyse**
![Alt Text](https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRMMmY4AzSCkbLudJ_K5GczfW5iS_NICVACSJA76jlizZPqC9-GHZE2HCwBAScZg-hzrv0&usqp=CAU)

To identify trend and relationships that can help answer business question
```{r get broad overview of data frame with useful summary statistics}
skim_without_charts(daily_activity_new)

```
```{r skim2}
skim_without_charts(weight_log_new)

```
```{r skim3}
skim_without_charts(sleep_daily_v2)

```
Lets compare Skims() with summary() function
```{r summary1}
summary(daily_activity_new)

```
```{r summary2}
summary(weight_log_new)

```
```{r summary3}
summary(sleep_daily_v2)

```
```{r convert date into weekday}
daily_activity_wd2 <- daily_activity_new 
  daily_activity_wd2$day <- strftime(daily_activity_wd2$ActivityDate, "%A")

View(daily_activity_wd2)

```
```{r date to weekday2}
sleep_daily_wd <- sleep_daily_v2
  sleep_daily_wd$day <- strftime(sleep_daily_wd$Date, "%A")
  
View(sleep_daily_wd)

```

**Summary**
This overview shows that cleaning was done properly and all issues have been corrected.

For **Mean**, total steps was 8319 at a distance of 5.98 miles, burning 2361 calories. Weight was 72.04kg/158.8pounds and BMI was 25.19 while total minutes asleep and in bed was 419.2 and 458.5 respectively.  
For **Min**, total steps was 4 at a distance of 0.00 miles, burning 52 calories.
Weight was 60kg/116.0pounds and BMI was 21.45 while total minutes asleep and in bed was 58.0 and 61.0 respectively  
For **Max**, Total steps was 36019 at a distance of 28.08 miles, burning 4900 calories.
Weight was 133.50kg/294.3pounds and BMI was 47.54 while total minutes asleep and in bed was 796.0 and 961.0 respectively

I'll merge the tables using only columns i want
```{r Merge daily activity and weight}
merge_table1 <- merge(daily_activity_wd2, weight_log_new, by.x = "Id",
                      by.y = "Id", all.x=TRUE, all.y = TRUE)

View(merge_table1)
```
```{r merged table and sleep}
merge_table2 <- merge(merge_table1, sleep_daily_wd, by.x = "Id",
                      by.y = "Id", all.x = TRUE, all.y = TRUE)

View(merge_table2)

```
```{r remove unwanted columns}
merge_all_tables <- merge_table2 %>% select(-one_of('TrackerDistance','LoggedActivitiesDistance', 'VeryActiveDistance', 'ModeratelyActiveDistance', 'LightActiveDistance', 'SedentaryActiveDistance', 'WeightPounds', 'IsManualReport', 'LogId', 'TotalSleepRecords'))

```
```{r}
summary(merge_all_tables)

```
I will now analyze the percentage of active minutes for each categorized column(active, fairly, lightly and sedentary) using a pie chart.
```{r Level of activity percentage}
VeryActiveMin <- sum(merge_all_tables$VeryActiveMinutes)
FairlyActiveMin <- sum(merge_all_tables$FairlyActiveMinutes)
LightlyActiveMin <- sum(merge_all_tables$LightlyActiveMinutes)
SedentaryMin <- sum(merge_all_tables$SedentaryMinutes)
TotalMin <- VeryActiveMin + FairlyActiveMin + LightlyActiveMin + SedentaryMin

slices <- c(VeryActiveMin, FairlyActiveMin, LightlyActiveMin, SedentaryMin)
lbls <-c("VeryActive", "FairlyActive", "LightlyActive", "Sedentary")
pct <- round(slices/sum(slices)*100)
lbls <- paste(lbls, pct)
lbls <- paste(lbls, "%", sep ="")
pie(slices, labels = lbls, col = rainbow(length(lbls)), main = "Percentage of Activity in Minutes" )
 

```
This info-graphic shows the sedentary level is way higher than all the other activity levels added together, meaning that for a whole month, the participants were inactive for 72% of that time. This can impact health negatively.
The World Health Organization and American Heart Association recommend at least 150 minutes of moderate-intensity activity or 75 minutes of vigorous activity, or a combination of both each week.
That means a daily goal of 21.4 minutes of moderate activity or 10.7 minutes of intense activity.
Running the code below, we can see that 30 participants fell within the range of Fairly or Active Minutes

Now, lets see the relationship between total steps taken and calories burned.
```{r total steps vs Calorie burn}
ggplot(data = merge_all_tables)+
  geom_point(mapping = aes(x=TotalSteps, y=Calories), color= "purple")+
  geom_smooth(mapping = aes(x=TotalSteps, y=Calories))+
  labs(tittle = "Relationship Between Total Steps and Calories Burned", x="Total Steps", y= "Calories Burned (kcal)")
```

This plot shows a positive relationship between the number of steps an individual taken and calorie burning, the more steps a person takes i.e increased activity equals higher calorie burn. This statement is proven true by the plot below detailing only active minutes against calorie burn.

```{r Active minutes vs calorie burn}
ggplot(data = merge_all_tables)+
  geom_point(mapping = aes(x=VeryActiveMinutes, y=Calories), color= "red")+
  geom_smooth(mapping = aes(x=VeryActiveMinutes, y=Calories))+
  labs(tittle = "Relationship Between Very Active Minutes and Calories Burned", x="Very Active Minutes", y="Calories Burned (kcal)")
```

I want to view how user activity is on each day of the week
```{r Activity per day}
ggplot(data=merge_all_tables, aes(x=day.x, y=TotalSteps, fill=day.x))+
  geom_bar(stat = "identity")+
  ylab("Total Steps")
  

```

Saturday and Wednesday show similar activity level while Tuesday has the most steps recorded

### **Phase 5:Share**
![Alt Text](https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcR2c_Icjtk9ahrEkvsjCoE7Bbv12VdTJ5Gdog&usqp=CAU)

**Summary of key findings:**
User’s average daily step count is 8319. This is low compared to the CDC recommended step count of 10,000.

Users are more active earlier on week days verse weekends.

We see that users are most active on Saturday, between 11:00am - 2:00pm, and Wednesday, between 5:00pm and 6:00pm.

There is a high correlation between activity level and the max amount of daily steps users take.

More active user burn more calories per step versus lower active users.

Traveling a minimum of 5 miles puts users, on average, at a higher caloric burn rate.

There was not sufficient data to carry out more detailed analysis as participant pool was insufficient.
### **Phase 6:Act**
![Alt Text](https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTA-XWHcmOpcCuiCd2jUCpzrQ1TlgiOzQNW7g&usqp=CAU)

**Recommendations**
Recommendations  

To attain users to aspire to attain the CDC recommendation of 10,000 steps per day, our app should have preset milestones for users every 2000 steps with a notification alerting them of how many more steps they need to reach 10,000 or the app can allow users set an achievable number of steps for each quadrant of the day i.e separate 24 hours into 4 quadrants of 6 hours each.  

Pop ups on the app that show link to sites were users can get health and exercise tips  

Our app should be designed to trigger device to alert users when they have been sedentary for too long, except during scheduled night sleep.

To enforce being active, our app should have a feature that lets users allow for notifications pushed to their phone, as well as their wellness watch device. This can be done every hour to encourage them to be active.

Our app should provide users with the ability to setup a sleep schedule, that can then create notifications for when it is time to sleep.

We should be alerting users to their activity level

Have milestone alerts and badge rewards for users who attain daily or weekly goals in order to boost better participation and morale.

There should be weekly and monthly summary on users activity and also recommendations on how to improve when needed

After one month, we should prompt users to fill out a survey or list one feature they would like added to the app or one of the Bellabeat devices.

Enhance User Experience and App Features: continuously work to improve BellaBeat apps’ user experience. Make regular updates, show insights on a regular basisand survey the customers for suggestions on the app

## **References**
Sandee LaMotte,CNN. (2022, October 10). 10 steps for weight loss and wellness. Retrieved from https://www.cnn.com/2022/10/10/health/steps-for-weight-loss-wellness/index.html
Centers for Disease Control and Prevention. (n.d.). Physical Activity - Basics - Adults. Retrieved from https://www.cdc.gov/physicalactivity/basics/adults/index.html Canadian
Society for Exercise Physiology. (n.d.). Canadian 24-Hour Movement Guidelines for Adults. Retrieved from https://csepguidelines.ca/
Cleveland Clinic. (n.d.). Calories Burned in a Day. Retrieved from https://health.clevelandclinic.org/calories-burned-in-a-day/ Harvard
T.H. Chan School of Public Health. (n.d.). Staying Active. Retrieved from https://www.hsph.harvard.edu/nutritionsource/staying-active/
Cleveland Clinic. (n.d.). Pulse (Heart Rate). Retrieved from https://my.clevelandclinic.org/health/diagnostics/17402-pulse--heart-rate
Centers for Disease Control and Prevention. (n.d.). How Much Sleep Do I Need? Retrieved from https://www.cdc.gov/sleep/about_sleep/how_much_sleep.html Medical News Today. (n.d.). What to know about BMI and body fat percentage. Retrieved from https://www.medicalnewstoday.com/articles/323446#body-mass-index-bmi